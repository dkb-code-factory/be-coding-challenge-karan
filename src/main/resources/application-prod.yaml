spring:
  datasource:
    # Production database connection - use environment variables
    url: ${DATABASE_URL:jdbc:postgresql://localhost:5432/codechallenge_db}
    username: ${DATABASE_USERNAME:postgres}
    password: ${DATABASE_PASSWORD:postgres}
    hikari:
      # Production-optimized connection pool because in productin you might need it for concurrency
      minimum-idle: ${HIKARI_MIN_IDLE:10}
      maximum-pool-size: ${HIKARI_MAX_POOL_SIZE:50}
      connection-timeout: 30000
      idle-timeout: 600000
      max-lifetime: 1800000
      leak-detection-threshold: 60000

  jpa:
    properties:
      hibernate:
        format_sql: false  # Disable in production
    show-sql: false

# Cache configuration - production settings
  cache:
    type: caffeine
    caffeine:
      spec: maximumSize=${CACHE_MAX_SIZE:5000},expireAfterWrite=${CACHE_EXPIRE_HOURS:1}h

# Actuator configuration - secure in production
management:
  endpoints:
    web:
      exposure:
        include: health,info,metrics  # Limited exposure in prod
      base-path: /actuator
  endpoint:
    health:
      show-details: when-authorized  # Hide details unless authorized

logging:
  level:
    root: INFO
    de.dkb.api.codeChallenge: INFO
    org.hibernate.SQL: WARN  # Disable SQL logging in production
    org.springframework.web: WARN

